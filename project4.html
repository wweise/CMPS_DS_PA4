<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CMPS 260: Module 3 Programming Assignment</title>
    <style> * { font-family: monospace; }</style>
    <script>
      console.log("Project");

      function Set() {
        this.items = {};
      }

      Set.prototype.add = function(value) {
        if (!this.has(value)) {
          this.items[value] = value;
          return true;
        }
        return false;
      };

      Set.prototype.delete = function(value) {
        if (this.has(value)) {
          delete this.items[value];
          return true;
        }
        return false;
      };

      Set.prototype.has = function(value) {
        return this.items.hasOwnProperty(value);
      };

      Set.prototype.clear = function() {
        this.items = {};
      };

      Set.prototype.size = function() {
        return Object.keys(this.items).length;
      };

      Set.prototype.values = function() {
        return Object.keys(this.items);
      };

      Set.prototype.union = function(otherSet) {
        var unionSet = new Set();
        var values = this.values();
        for (var i = 0; i < values.length; i++) {
          unionSet.add(values[i]);
        }
        values = otherSet.values();
        for (var i = 0; i < values.length; i++) {
          unionSet.add(values[i]);
        }
        return unionSet;
      };

      Set.prototype.intersection = function(otherSet) {
        var intersectionSet = new Set();
        var values = this.values();
        for (var i = 0; i < values.length; i++) {
          if (otherSet.has(values[i])) {
            intersectionSet.add(values[i]);
          }
        }
        return intersectionSet;
      };

      Set.prototype.difference = function(otherSet) {
        var differenceSet = new Set();
        var values = this.values();
        for (var i = 0; i < values.length; i++) {
          if (!otherSet.has(values[i])) {
            differenceSet.add(values[i]);
          }
        }
        return differenceSet;
      };

      Set.prototype.subset = function(otherSet) {
        var values = this.values();
        for (var i = 0; i < values.length; i++) {
          if (!otherSet.has(values[i])) {
            return false;
          }
        }
        return true;
      };

      var allStudents = new Set();
      ["Mary", "Joe", "Tim", "Rosalee", "Vincent", "Caroline"].forEach(s => allStudents.add(s));

      var class1 = new Set();
      ["Rosalee", "Joe", "Mary", "Tim"].forEach(s => class1.add(s));

      var class2 = new Set();
      ["Mary", "Tim", "Vincent", "Rosalee", "Caroline"].forEach(s => class2.add(s));

      var class3 = new Set();
      ["Caroline", "Tim", "Vincent", "Rosalee", "Joe"].forEach(s => class3.add(s));

      var attendedAtLeastOne = class1.union(class2).union(class3);
      var attendedAll = class1.intersection(class2).intersection(class3);

      console.log("Attended at least one class:", attendedAtLeastOne.values());
      console.log("Attended all classes:", attendedAll.values());
      console.log("Class 1 subset of all students:", class1.subset(allStudents));
      console.log("Union subset of all students:", attendedAtLeastOne.subset(allStudents));

      function Dictionary() {
        this.items = {};
      }

      Dictionary.prototype.set = function(key, value) {
        this.items[key] = value;
      };

      Dictionary.prototype.delete = function(key) {
        if (this.has(key)) {
          delete this.items[key];
          return true;
        }
        return false;
      };

      Dictionary.prototype.has = function(key) {
        return this.items.hasOwnProperty(key);
      };

      Dictionary.prototype.get = function(key) {
        return this.has(key) ? this.items[key] : undefined;
      };

      Dictionary.prototype.clear = function() {
        this.items = {};
      };

      Dictionary.prototype.size = function() {
        return Object.keys(this.items).length;
      };

      Dictionary.prototype.keys = function() {
        return Object.keys(this.items);
      };

      Dictionary.prototype.values = function() {
        var keys = this.keys();
        var values = [];
        for (var i = 0; i < keys.length; i++) {
          values.push(this.items[keys[i]]);
        }
        return values;
      };

      Dictionary.prototype.merge = function(dict) {
        var keys = dict.keys();
        for (var i = 0; i < keys.length; i++) {
          this.set(keys[i], dict.get(keys[i]));
        }
      };

      Dictionary.prototype.print = function() {
        var keys = this.keys();
        for (var i = 0; i < keys.length; i++) {
          console.log(keys[i] + ": " + this.items[keys[i]]);
        }
      };

      var dict1 = new Dictionary();
      dict1.set("key1", "val1");
      dict1.set("key2", "val2");
      dict1.set("key3", "val3");

      var dict2 = new Dictionary();
      dict2.set("key3", "val3b");
      dict2.set("key4", "val4");

      dict1.merge(dict2);
      dict1.print();

      function HashTable() {
        this.table = [];
      }

      HashTable.prototype.loseloseHashCode = function(key) {
        var hash = 0;
        for (var i = 0; i < key.length; i++) {
          hash += key.charCodeAt(i);
        }
        return hash % 37;
      };

      HashTable.prototype.put = function(key, value) {
        var position = this.loseloseHashCode(key);
        this.table[position] = value;
      };

      HashTable.prototype.get = function(key) {
        var position = this.loseloseHashCode(key);
        return this.table[position];
      };

      HashTable.prototype.remove = function(key) {
        var position = this.loseloseHashCode(key);
        this.table[position] = undefined;
      };

      HashTable.prototype.print = function() {
        for (var i = 0; i < this.table.length; i++) {
          if (this.table[i] !== undefined) {
            console.log(i + ": " + this.table[i]);
          }
        }
      };

      var ht = new HashTable();
      ht.put("name", "William");
      ht.put("course", "CMPS 260");
      ht.print();
      console.log("Get 'name':", ht.get("name"));
      ht.remove("name");
      ht.print();
    </script>
  </head>
  <body> See console! </body>
</html>
